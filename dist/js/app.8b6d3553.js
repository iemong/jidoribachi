(function(t){function e(e){for(var a,s,o=e[0],u=e[1],c=e[2],d=0,h=[];d<o.length;d++)s=o[d],i[s]&&h.push(i[s][0]),i[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);l&&l(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var u=n[o];0!==i[u]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={1:0},r=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;r.push([3,0]),n()})({3:function(t,e,n){t.exports=n("Vtdi")},"5pot":function(t,e,n){"use strict";var a=n("sivX"),i=n.n(a);i.a},RpiI:function(t,e,n){},Vtdi:function(t,e,n){"use strict";n.r(e);n("yt8O"),n("VRzm");var a=n("iqUP"),i=n("Kw5r"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("link",{attrs:{type:"text/css",rel:"stylesheet",href:"https://www.gstatic.com/firebasejs/ui/3.2.0/firebase-ui-auth.css"}}),n("router-view")],1)},s=[],o=(n("nNx0"),n("KHd+")),u={},c=Object(o["a"])(u,r,s,!1,null,null,null),l=c.exports,d=n("jE9Z"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("video",{ref:"video",staticClass:"video"}),n("canvas",{ref:"canvas",staticClass:"canvas"}),n("div",{staticClass:"button-wrapper"},[n("button",{staticClass:"js-button",attrs:{"data-type":"start"},on:{click:t.init}},[t._v("起動")]),t.isDebug?[n("button",{staticClass:"js-button",attrs:{"data-type":"shutter"},on:{click:t.setCanvas}},[t._v("シャッター")]),n("a",{staticClass:"js-button",attrs:{"data-type":"download",href:t.imageURL,target:"_blank",download:"image"}},[t._v("ダウンロード")]),n("button",{staticClass:"js-button",attrs:{"data-type":"upload"},on:{click:t.upload}},[t._v("アップロード")])]:t._e()],2)])},p=[],f=(n("ls82"),n("MECJ")),v="hogehoge.jpg",b={name:"home",components:{},data:function(){return{media:null,video:null,context:null,width:null,height:null,canvas:null,database:null,picture:null,targetRef:null,isReadyCamera:!1,isDebug:!1}},computed:{imageURL:function(){return this.picture}},methods:{init:function(){var t=this;this.media=navigator.mediaDevices.getUserMedia({audio:!1,video:!0}),this.media.then(function(e){t.video=t.$refs.video,t.video.srcObject=e,t.video.onloadedmetadata=function(){t.video.play()},t.isReadyCamera=!0}).catch(function(t){throw new Error(t)})},setCanvas:function(t){var e=this;this.canvas=this.$refs.canvas,this.canvas.width=this.$refs.video.clientWidth,this.canvas.height=this.$refs.video.clientHeight,this.context=this.canvas.getContext("2d"),this.context.drawImage(this.video,0,0),this.canvas.toBlob(function(n){e.picture=n,t instanceof Function&&t()},"image/jpeg",.5)},upload:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.targetRef.put(this.picture);case 2:return e=t.sent,t.next=5,e.ref.getDownloadURL();case 5:n=t.sent,this.database.ref("jidoribachiURL").set({url:n});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),saveImageInStorage:function(){this.setCanvas(this.upload.bind(this))}},created:function(){var t=a["storage"](),e=t.ref();this.targetRef=e.child(v)},mounted:function(){var t=this;this.width=window.innerWidth,this.height=window.innerHeight,this.database=a["database"](),this.database.ref("jidoribachi").on("value",function(e){""!==e.val()&&t.isReadyCamera&&t.saveImageInStorage()})}},m=b,g=(n("5pot"),Object(o["a"])(m,h,p,!1,null,null,null)),w=g.exports,y=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},j=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{attrs:{id:"firebaseui-auth-container"}})])}],_=n("WC58"),x=n.n(_),R={mounted:function(){var t=new x.a.auth.AuthUI(a["auth"]());t.start("#firebaseui-auth-container",{signInFlow:"popup",signInSuccessUrl:"/#/home",signInOptions:[a["auth"].EmailAuthProvider.PROVIDER_ID]})}},C=R,I=(n("kjS5"),Object(o["a"])(C,y,j,!1,null,"13c392bf",null)),O=I.exports;i["a"].use(d["a"]);var S=new d["a"]({routes:[{path:"/",name:"login",component:O},{path:"/home",name:"home",component:w}]}),k=n("L2JU");i["a"].use(k["a"]);var D=new k["a"].Store({state:{},mutations:{},actions:{}}),U=n("i/4F");i["a"].config.productionTip=!1,a["initializeApp"](U),new i["a"]({router:S,store:D,render:function(t){return t(l)}}).$mount("#app")},boi5:function(t,e,n){},"i/4F":function(t){t.exports={apiKey:"AIzaSyDIhSJFxR94drgypYYbGQDLFXJV61pGD1s",authDomain:"test-cbbae.firebaseapp.com",databaseURL:"https://test-cbbae.firebaseio.com",projectId:"test-cbbae",storageBucket:"test-cbbae.appspot.com",messagingSenderId:"746611204311"}},kjS5:function(t,e,n){"use strict";var a=n("RpiI"),i=n.n(a);i.a},nNx0:function(t,e,n){"use strict";var a=n("boi5"),i=n.n(a);i.a},sivX:function(t,e,n){}});
//# sourceMappingURL=app.8b6d3553.js.map